#
# Copyright (c) 1996, 1997, 1998, 1999 Shigio Yamaguchi
# Copyright (c) 1999, 2000, 2001 Tama Communications Corporation
#
# This file is part of GNU GLOBAL.
#
# GNU GLOBAL is free software; you can redistribute it and/or modify
# it under the terms of the GNU General Public License as published by
# the Free Software Foundation; either version 2, or (at your option)
# any later version.
#
# GNU GLOBAL is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
# GNU General Public License for more details.
#
# You should have received a copy of the GNU General Public License
# along with this program; if not, write to the Free Software
# Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.
#
# This file is converted to the following files:
#	o command source file(for usage and help).
#	o man format reference manual.
#	o texinfo format reference manual.
#
@HEADER	BTREEOP,1,December 2001,GNU Project
@NAME	btreeop - btree database maintenance tool.
@SYNOPSIS
	@name{btreeop} [-A][-C][-D[n] @arg{key}][-K[n] @arg{key}][-L[2]][-k @arg{prefix}][@arg{dbname}]
@DESCRIPTION
	@name{Btreeop} execute simple operations for @xref{btree,3} database.
	@name{Btreeop} can create database, write record, read record
	(sequential or indexed) and delete record from it.
	Duplicate entries are allowed.
	Multi-key is available but only primary key can use index of
	@xref{btree,3}.
@COMMANDS
	A capital letter means a command. If no command specified
	then it assume sequential read operation.
	The following commands are available:
	@begin_itemize
	@item{none}
		Read records sequentially.
	@item{@option{-A}}
		Append records. If database doesn't exist, btreeop creates it.
	@item{@option{-C}}
		Create database and write records to it.
	@item{@option{-D}[@arg{n}] @arg{key}}
		Delete records by the @arg{key}. By default, @arg{n} is 0 (primary key).
	@item{@option{-K}[@arg{n}] @arg{key}}
		Search records by the @arg{key}. By default, @arg{n} is 0 (primary key).
	@item{@option{-L}[@arg{2}]}
		List all primary keys.
		If @arg{2} is specified, list all the key and data pairs.
	@item{@arg{dbname}}
		Database name. By default, it assume @file{btree}.
	@end_itemize
@OPTIONS
	@begin_itemize
	@item{@option{-k} @arg{prefix}}
		Scan records which have the @arg{prefix} as a primary key.
		This option is valid only with sequential read operation
		@option{-L} command or no command.
	@end_itemize
@FORMAT
To creat (or append) database, btreeop read data from stdin.
The format of the data is the following.

  Primary-key  Secondary-key-1  Secondary-key-2  Data
  (keyno = 0)  (keyno = 1)      (keyno = 2)
  --------------------------------------------------------------
  main         246              main.c           main () {
  func         120              library.c        func(a1, a2)
  .
  .
  .

o All key and data are separated by blank('\\t' or ' '). 
o Key cannot include blank.
o Data can include blank.
o Null data not allowed.

Additionally, META record is available. META record has a key that
start with a blank. You can read this record only by indexed read
operation (-K option). Usage is unlimited by btreeop.
@EXAMPLES
Create database.

  % btreeop -C
  key1  data1
  key2  data2
  key3  data3
  ^D
  %

Append records.

  % btreeop -A
   __.VERSION 2
  key2  data2-2
  ^D
  %

Sequential read.

  % btreeop
  key1  data1
  key2  data2-2
  key2  data2
  key3  data3
  %

Indexed read.

  % btreeop -K key2
  key2  data2-2
  key2  data2
  % btreeop -K ' __.VERSION'
   __.VERSION 2
  %

List primary keys.

  % btreeop -L
  key1
  key2
  key3
  %

Delete record.

  % btreeop -D ' __.VERSION'
  % btreeop -K ' __.VERSION'
  %

@FILES
	@begin_itemize
	@item{@file{btree}}
		default database name.
	@end_itemize
@DIAGNOSTICS
	@name{Btreeop} exits with a non 0 value if an error occurred, 0 otherwise.
@SEE ALSO
	@xref{btree,3}.

	GNU GLOBAL source code tag system@br
	(http://www.gnu.org/software/global/).
@AUTHOR
	Shigio Yamaguchi
@HISTORY
	The @name{btreeop} command appeared in FreeBSD 2.2.2.
